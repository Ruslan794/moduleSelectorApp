<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Selection Complete</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .success-animation {
            animation: success-pulse 2s ease-in-out infinite;
        }

        @keyframes success-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .step {
            display: flex;
            align-items: center;
            color: #198754;
        }
        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #198754;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        .completion-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);
        }
        .course-item {
            padding: 8px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .compulsory-course {
            border-left-color: #0d6efd;
            background-color: #f0f7ff;
        }
        .optional-course {
            border-left-color: #198754;
            background-color: #f0fff4;
        }
        .abroad-course {
            border-left-color: #dc3545;
            background-color: #fff0f0;
        }
        .summary-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 15px;
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            display: block;
        }
        .checkmark {
            font-size: 4rem;
            color: #28a745;
            margin-bottom: 20px;
        }
    </style>
</head>
<body class="bg-light">
<div class="container py-4">
    <div class="step-indicator">
        <div class="step">
            <div class="step-number">✓</div>
            <span>Select Subject</span>
        </div>
        <div class="step">
            <div class="step-number">✓</div>
            <span>Choose Courses</span>
        </div>
        <div class="step">
            <div class="step-number">✓</div>
            <span>Review Selection</span>
        </div>
        <div class="step">
            <div class="step-number">✓</div>
            <span>Complete</span>
        </div>
    </div>

    <div class="progress mb-4">
        <div class="progress-bar bg-success" style="width: 100%"></div>
    </div>

    <div class="completion-card success-animation">
        <div class="checkmark">✅</div>
        <h1 class="mb-4">Course Selection Complete!</h1>
        <p class="mb-4 fs-5">Congratulations! Your course selection has been successfully saved.</p>
        <p>Student: <strong th:text="${selection.surveyData.name + ' ' + selection.surveyData.surname}">Student Name</strong></p>
        <p>Subject: <strong th:text="${selection.selectedSubject.name}">Subject Name</strong></p>
        <p class="small">Selection ID: <span th:text="${selection.id}">123456</span></p>
    </div>

    <div class="row">
        <div class="col-lg-4">
            <div class="stats-card">
                <span class="stat-number" th:text="${selection.selectedSubject.getCompulsoryCourses().size()}">8</span>
                <p class="mb-0">Compulsory Courses</p>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="stats-card">
                <span class="stat-number" th:text="${selection.selectedOptionalCourses.size()}">4</span>
                <p class="mb-0">Optional Courses Selected</p>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="stats-card">
                <span class="stat-number" th:if="${selection.selectedAbroadSemester != null}">1</span>
                <span class="stat-number" th:if="${selection.selectedAbroadSemester == null}">0</span>
                <p class="mb-0">Abroad Semester</p>
            </div>
        </div>
    </div>

    <div class="card summary-card">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0">Your Final Course Selection</h3>
        </div>
        <div class="card-body">
            <!-- Subject Info -->
            <div class="mb-4">
                <h4 class="text-primary" th:text="${selection.selectedSubject.name}">Subject Name</h4>
                <p class="text-muted">Your selected study program</p>
            </div>

            <!-- Compulsory Courses -->
            <div class="mb-4">
                <h5 class="text-primary mb-3">Compulsory Courses</h5>
                <div class="row">
                    <div class="col-md-6" th:each="course : ${selection.selectedSubject.getCompulsoryCourses()}">
                        <div class="course-item compulsory-course">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong th:text="${course.code}">CS101</strong><br>
                                    <span class="small" th:text="${course.name}">Course Name</span>
                                </div>
                                <span class="badge bg-primary">Sem <span th:text="${course.semester}">1</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Selected Optional Courses -->
            <div th:if="${!#lists.isEmpty(selection.selectedOptionalCourses)}" class="mb-4">
                <h5 class="text-success mb-3">Your Optional Course Choices</h5>
                <div class="row">
                    <div class="col-md-6" th:each="course : ${selection.selectedOptionalCourses}">
                        <div class="course-item optional-course">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong th:text="${course.code}">OPT101</strong><br>
                                    <span class="small" th:text="${course.name}">Optional Course</span>
                                </div>
                                <span class="badge bg-success">Sem <span th:text="${course.semester}">3</span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Abroad Semester -->
            <div th:if="${selection.selectedAbroadSemester != null}" class="mb-4">
                <h5 class="text-danger mb-3">Study Abroad Program</h5>
                <div class="alert alert-danger">
                    <h6 class="mb-2">
                        <strong th:text="${selection.selectedAbroadSemester.university.name}">University Name</strong>
                        - <span th:text="${selection.selectedAbroadSemester.university.country}">Country</span>
                    </h6>
                    <p class="mb-0">Semester <span th:text="${selection.selectedAbroadSemester.semester}">4</span></p>

                    <div class="mt-3">
                        <div th:if="${!#lists.isEmpty(selection.selectedAbroadSemester.getCompulsoryCourses())}">
                            <strong>Required courses abroad:</strong>
                            <ul class="mt-2">
                                <li th:each="course : ${selection.selectedAbroadSemester.getCompulsoryCourses()}"
                                    th:text="${course.code} + ' - ' + ${course.name}">Course</li>
                            </ul>
                        </div>

                        <div th:if="${!#lists.isEmpty(selection.selectedOptionalCourses.?[abroadSemester != null])}">
                            <strong>Selected optional courses abroad:</strong>
                            <ul class="mt-2">
                                <li th:each="course : ${selection.selectedOptionalCourses.?[abroadSemester != null]}"
                                    th:text="${course.code} + ' - ' + ${course.name}">Course</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Next Steps -->
            <div class="alert alert-info">
                <h6><strong>Next Steps:</strong></h6>
                <ul class="mb-0">
                    <li>Save this page for your records</li>
                    <li>Check your email for confirmation details</li>
                    <li>Contact the academic office if you need to make changes</li>
                    <li th:if="${selection.selectedAbroadSemester != null}">Follow up on abroad semester application requirements</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <button onclick="window.print()" class="btn btn-primary btn-lg me-3">Print Selection</button>
        <a href="/" class="btn btn-outline-secondary btn-lg">Return to Home</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Auto-scroll to top on page load
    window.scrollTo(0, 0);

    // Optional: Add confetti or celebration effect
    document.addEventListener('DOMContentLoaded', function() {
        // You can add celebration animations here
        console.log('Course selection completed successfully!');
    });
</script>
</body>
</html>